<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ggpointless">
<title>ggpointless examples • ggpointless</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Lato-0.4.1/font.css" rel="stylesheet">
<link href="../deps/_Fira%20Code-0.4.1/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ggpointless examples">
<meta property="og:description" content="ggpointless">
<meta property="og:image" content="https://flrd.github.io/ggpointless/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggpointless</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/ggpointless.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/examples.html">ggpointless examples</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/flrd/ggpointless/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="examples_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>ggpointless examples</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/flrd/ggpointless/blob/HEAD/vignettes/examples.Rmd" class="external-link"><code>vignettes/examples.Rmd</code></a></small>
      <div class="d-none name"><code>examples.Rmd</code></div>
    </div>

    
    
<p>This vignette shows use cases for the data sets included in the <code>ggpointless</code> package:</p>
<ol style="list-style-type: decimal">
<li>
<code>co2_ml</code> : <a href="https://gml.noaa.gov/ccgg/trends/data.html" class="external-link">CO<sub>2</sub> records taken at Mauna Loa, Hawaii</a>
</li>
<li>
<code>covid_vac</code> : <a href="https://covid.cdc.gov/covid-data-tracker/#rates-by-vaccine-status" class="external-link">COVID-19 Cases and Deaths by Vaccination Status</a>
</li>
<li>
<code>female_leaders</code> : <a href="https://en.wikipedia.org/w/index.php?title=List_of_elected_and_appointed_female_heads_of_state_and_government&amp;oldid=1078024588" class="external-link">Elected and appointed female heads of state and government</a>
</li>
</ol>
<div class="section level3">
<h3 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://flrd.github.io/ggpointless/">ggpointless</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggtext/" class="external-link">ggtext</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/slowkow/ggrepel" class="external-link">ggrepel</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org" class="external-link">scales</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">text_size</span> <span class="op">&lt;-</span> <span class="fl">2.5</span>
<span class="va">text_color</span> <span class="op">&lt;-</span> <span class="st">"#4b4c4d"</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.caption.position <span class="op">=</span> <span class="st">"plot"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">9</span>, color <span class="op">=</span> <span class="va">text_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.ticks.length.x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>, <span class="st">"mm"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.ticks.length.y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>, <span class="st">"mm"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># https://stackoverflow.com/a/17312440/8583393</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">text_size</span> <span class="op">*</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">0.352777778</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">1</span>, angle <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title.position <span class="op">=</span> <span class="st">"plot"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="carbon-dioxide-concentration-in-the-atmosphere">Carbon Dioxide Concentration in the Atmosphere<a class="anchor" aria-label="anchor" href="#carbon-dioxide-concentration-in-the-atmosphere"></a>
</h2>
<p>We’ll start to recreate <a href="https://github.com/gka" class="external-link">Gregor Aisch</a>’s plot of <a href="https://blog.datawrapper.de/weekly-chart-carbon-dioxide/" class="external-link">carbon dioxide concentration over time</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">co2_ml</span><span class="op">)</span></code></pre></div>
<p><code>co2_ml</code> is a data.frame of monthly CO<sub>2</sub> measurements from March 1958 to January 2022, taken at Mauna Loa, Hawaii . In order to plot a line for each decade on a common scale, we first need to add one additional variable to <code>co2_ml</code> that we’ll call <code>date_scale</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co2_ml</span><span class="op">$</span><span class="va">date_scale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%d-%d-01"</span>, <span class="fl">1950</span> <span class="op">+</span> <span class="op">(</span><span class="va">co2_ml</span><span class="op">$</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">10</span><span class="op">)</span>, <span class="va">co2_ml</span><span class="op">$</span><span class="va">month</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Also, we create a helper function to change the date labels of the x-axis.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">axis_labeller</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"%Y"</span><span class="op">)</span><span class="op">)</span>
  <span class="va">tmp</span> <span class="op">&lt;-</span> <span class="va">year</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">year</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="op">!</span><span class="va">tmp</span>, <span class="st">""</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<details><p><summary><b>See full code</b></summary></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># layers</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">co2_ml</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date_scale</span>, <span class="va">co2_ppm</span>, color <span class="op">=</span> <span class="va">decade</span><span class="op">)</span><span class="op">)</span>
<span class="co"># sustainable level</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">350</span><span class="op">)</span>,
  color <span class="op">=</span> <span class="st">"#dbd9db"</span>,
  size <span class="op">=</span> <span class="fl">1</span>
<span class="op">)</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1951-01-01"</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">348</span><span class="op">)</span>,
  label <span class="op">=</span> <span class="st">"sustainable level"</span>,
  size <span class="op">=</span> <span class="va">text_size</span> <span class="op">+</span> <span class="fl">.3</span>,
  color <span class="op">=</span> <span class="st">"#dbd9db"</span>,
  hjust <span class="op">=</span> <span class="st">"left"</span>,
  inherit.aes <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_pointless.html">geom_pointless</a></span><span class="op">(</span>location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"first"</span>, <span class="st">"last"</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co"># label decades</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">co2_ml</span>, subset <span class="op">=</span> <span class="va">decade</span> <span class="op">!=</span> <span class="st">"2020's"</span><span class="op">)</span>,
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">decade</span><span class="op">)</span>,
  size <span class="op">=</span> <span class="va">text_size</span>,
  stat <span class="op">=</span> <span class="st">"pointless"</span>,
  location <span class="op">=</span> <span class="st">"last"</span>,
  hjust <span class="op">=</span> <span class="st">"left"</span>,
  nudge_x <span class="op">=</span> <span class="fl">40</span>
<span class="op">)</span>
<span class="co"># label at first year in decade</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">co2_ml</span>, subset <span class="op">=</span> <span class="va">decade</span> <span class="op">!=</span> <span class="st">"1950's"</span><span class="op">)</span>,
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">year</span>, group <span class="op">=</span> <span class="va">decade</span><span class="op">)</span>,
  size <span class="op">=</span> <span class="va">text_size</span>,
  color <span class="op">=</span> <span class="va">text_color</span>,
  stat <span class="op">=</span> <span class="st">"pointless"</span>,
  location <span class="op">=</span> <span class="st">"first"</span>,
  vjust <span class="op">=</span> <span class="st">"top"</span>,
  hjust <span class="op">=</span> <span class="st">"left"</span>,
  nudge_y <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>
<span class="op">)</span>

<span class="co"># label at last year in decade</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">co2_ml</span>, subset <span class="op">=</span> <span class="op">!</span><span class="op">(</span><span class="va">decade</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1950's"</span>, <span class="st">"2020's"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">year</span>, group <span class="op">=</span> <span class="va">decade</span><span class="op">)</span>,
  size <span class="op">=</span> <span class="va">text_size</span>,
  color <span class="op">=</span> <span class="va">text_color</span>,
  stat <span class="op">=</span> <span class="st">"pointless"</span>,
  location <span class="op">=</span> <span class="st">"maximum"</span>,
  vjust <span class="op">=</span> <span class="st">"bottom"</span>,
  nudge_y <span class="op">=</span> <span class="fl">1</span>
<span class="op">)</span>

<span class="co"># label the years 2014 to 2018 in the format '%y</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">2014</span><span class="op">:</span><span class="fl">2018</span>, <span class="kw">function</span><span class="op">(</span><span class="va">yrs</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">co2_ml</span>, subset <span class="op">=</span> <span class="va">year</span> <span class="op">==</span> <span class="va">yrs</span><span class="op">)</span>,
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"'%i"</span>, <span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">100</span><span class="op">)</span>, group <span class="op">=</span> <span class="va">year</span><span class="op">)</span>,
    size <span class="op">=</span> <span class="va">text_size</span>,
    color <span class="op">=</span> <span class="va">text_color</span>,
    stat <span class="op">=</span> <span class="st">"pointless"</span>,
    location <span class="op">=</span> <span class="st">"maximum"</span>,
    vjust <span class="op">=</span> <span class="st">"bottom"</span>,
    nudge_y <span class="op">=</span> <span class="fl">1</span>
  <span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="co">#  highlight all-time maximum</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_pointless.html">geom_pointless</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">co2_ml</span>, subset <span class="op">=</span> <span class="va">decade</span> <span class="op">==</span> <span class="st">"2020's"</span><span class="op">)</span>,
  location <span class="op">=</span> <span class="st">"maximum"</span>,
  size <span class="op">=</span> <span class="fl">8</span>,
  shape <span class="op">=</span> <span class="fl">21</span>,
  fill <span class="op">=</span> <span class="cn">NA</span>,
  stroke <span class="op">=</span> <span class="fl">.9</span>
<span class="op">)</span>

<span class="co"># label all-time maximum</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/geom_richtext.html" class="external-link">geom_richtext</a></span><span class="op">(</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">date_scale</span> <span class="op">+</span> <span class="fl">500</span>,
    y <span class="op">=</span> <span class="va">co2_ppm</span> <span class="op">-</span> <span class="fl">3</span>,
    group <span class="op">=</span> <span class="cn">NULL</span>,
    label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"**%g ppm**&lt;br&gt;%s %s"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">co2_ppm</span><span class="op">)</span>, <span class="va">month.name</span><span class="op">[</span><span class="va">month</span><span class="op">]</span>, <span class="va">year</span><span class="op">)</span>
  <span class="op">)</span>,
  stat <span class="op">=</span> <span class="st">"pointless"</span>,
  location <span class="op">=</span> <span class="st">"maximum"</span>,
  size <span class="op">=</span> <span class="va">text_size</span>,
  color <span class="op">=</span> <span class="va">text_color</span>,
  fill <span class="op">=</span> <span class="cn">NA</span>,
  label.color <span class="op">=</span> <span class="cn">NA</span>
<span class="op">)</span>

<span class="co"># draw curve from all-time maximum to its label</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_curve</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">co2_ml</span>, subset <span class="op">=</span> <span class="va">decade</span> <span class="op">==</span> <span class="st">"2020's"</span><span class="op">)</span>,
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">date_scale</span> <span class="op">+</span> <span class="fl">90</span>,
    xend <span class="op">=</span> <span class="va">date_scale</span> <span class="op">+</span> <span class="fl">500</span>,
    y <span class="op">=</span> <span class="va">co2_ppm</span> <span class="op">+</span> <span class="fl">2</span>,
    yend <span class="op">=</span> <span class="va">co2_ppm</span> <span class="op">+</span> <span class="fl">2</span>
  <span class="op">)</span>,
  stat <span class="op">=</span> <span class="st">"pointless"</span>,
  location <span class="op">=</span> <span class="st">"maximum"</span>,
  curvature <span class="op">=</span> <span class="op">-</span><span class="fl">.4</span>,
  size <span class="op">=</span> <span class="fl">.35</span>,
  color <span class="op">=</span> <span class="va">text_color</span>,
  inherit.aes <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="co"># scales</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>
  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%i-01-01"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1950</span><span class="op">:</span><span class="fl">1960</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
  labels <span class="op">=</span> <span class="va">axis_labeller</span>,
  expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>mult <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="op">-</span><span class="fl">.03</span><span class="op">)</span><span class="op">)</span>,
  limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%i-01-01"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1950</span>, <span class="fl">1961</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># colors</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>
  values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"#f4ae1b"</span>,
    <span class="st">"#e99950"</span>,
    <span class="st">"#dc8471"</span>,
    <span class="st">"#cc708f"</span>,
    <span class="st">"#b85baa"</span>,
    <span class="st">"#9f46c6"</span>,
    <span class="st">"#7a31e1"</span>,
    <span class="st">"#311dfc"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="co"># title, subtitle, caption</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    title <span class="op">=</span> <span class="st">"Carbon Dioxide Concentration in the Atmosphere"</span>,
    subtitle <span class="op">=</span> <span class="st">"Each line represents one decade, from 1958 to 2022. CO2 concentration is measured in\nparts per million* (ppm)."</span>,
    caption <span class="op">=</span> <span class="st">"*The mole fraction of CO2, expressed as parts per million (ppm) is the number of molecules of CO2 in every million\nmolecules of dried air (water vapor removed). The 'sustainable level' of 350ppm, equivalent to the 1990 levels, has\nbeen identified by UN climate scientists.\nSource: National Oceanic &amp; Atmospheric Adm. (NOAA)"</span>,
    x <span class="op">=</span> <span class="st">"Years into decade"</span>,
    y <span class="op">=</span> <span class="st">"ppm"</span>
  <span class="op">)</span></code></pre></div>
</details><p><img src="examples_files/figure-html/co2_plot-1.png" width="95%"></p>
</div>
<div class="section level2">
<h2 id="rates-of-covid-19-cases-and-deaths-by-vaccination-status">Rates of COVID-19 Cases and Deaths by Vaccination Status<a class="anchor" aria-label="anchor" href="#rates-of-covid-19-cases-and-deaths-by-vaccination-status"></a>
</h2>
<p>The following two charts show age-adjusted daily cases and death rates for vaccinated and unvaccinated people in 26 states in the USA. This example is inspired by a graphic from the New York Times <a href="https://www.nytimes.com/interactive/2021/us/covid-cases.html" class="external-link">Coronavirus Map and Cases</a>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">covid_vac</span><span class="op">)</span></code></pre></div>
<p>Again, we create a helper function, this time to change the facet labels:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">covid_labeller</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">label</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Average daily %ss"</span>, <span class="va">label</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<details><p><summary><b>See full code</b></summary></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># layers</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>
  <span class="va">covid_vac</span>,
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">date</span>,
    y <span class="op">=</span> <span class="va">incidence</span> <span class="op">/</span> <span class="fl">7</span>,
    color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interaction.html" class="external-link">interaction</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="va">status</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_step</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">.65</span>, direction <span class="op">=</span> <span class="st">"vh"</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">status</span><span class="op">)</span>,
  stat <span class="op">=</span> <span class="st">"pointless"</span>,
  location <span class="op">=</span> <span class="st">"last"</span>,
  size <span class="op">=</span> <span class="va">text_size</span>,
  nudge_x <span class="op">=</span> <span class="fl">5</span>,
  hjust <span class="op">=</span> <span class="st">"left"</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_pointless.html">geom_pointless</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="co"># facets</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span>,
  ncol <span class="op">=</span> <span class="fl">1</span>,
  scales <span class="op">=</span> <span class="st">"free_y"</span>,
  labeller <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/as_labeller.html" class="external-link">as_labeller</a></span><span class="op">(</span><span class="va">covid_labeller</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># scales</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>mult <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>n.breaks <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>
  values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"case.unvaccinated"</span> <span class="op">=</span> <span class="st">"#050038"</span>,
    <span class="st">"case.fully vaccinated"</span> <span class="op">=</span> <span class="st">"#9187f7"</span>,
    <span class="st">"death.unvaccinated"</span> <span class="op">=</span> <span class="st">"#f14e1c"</span>,
    <span class="st">"death.fully vaccinated"</span> <span class="op">=</span> <span class="st">"#f8a187"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="co"># title, subtitle, caption</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    title <span class="op">=</span> <span class="st">"Rates for vaccinated and unvaccinated"</span>,
    subtitle <span class="op">=</span> <span class="st">"Per 100,000"</span>,
    x <span class="op">=</span> <span class="cn">NULL</span>,
    y <span class="op">=</span> <span class="cn">NULL</span>,
    caption <span class="op">=</span> <span class="st">"Source: Centers for Disease Control and Prevention\nRates of COVID-19 Cases and Deaths by Vaccination Status, Apr 2021 to Dec 2021."</span>
  <span class="op">)</span>

<span class="co"># theme</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</details><p><img src="examples_files/figure-html/covid_plot-1.png" width="95%"></p>
</div>
<div class="section level2">
<h2 id="female-leaders-of-independent-states">Female leaders of independent states<a class="anchor" aria-label="anchor" href="#female-leaders-of-independent-states"></a>
</h2>
<p>The data used here comes from the Wikipedia article <a href="https://en.wikipedia.org/w/index.php?title=List_of_elected_and_appointed_female_heads_of_state_and_government&amp;oldid=1078024588" class="external-link">List of elected and appointed female heads of state and government</a> and is collected in the dataset <code>female_leaders</code>.</p>
<p>Before we plot, we want to answer the question: which women are in office for more than 12 years?</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sirimavo Bandaranaike was both in executive and non-executive position</span>
<span class="co"># setting power to last observation by person</span>
<span class="va">female_leaders</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span>
  <span class="va">female_leaders</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"startdate"</span>, <span class="st">"enddate"</span>, <span class="st">"country"</span><span class="op">)</span>, <span class="op">]</span>,
  <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">name</span>, <span class="va">female_leaders</span>, <span class="va">tail</span>, <span class="fl">1</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"country"</span>, <span class="st">"power"</span><span class="op">)</span><span class="op">]</span>,
  all.x <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span>
  <span class="va">days_in_office</span> <span class="op">~</span> <span class="va">name</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">female_leaders</span>, days_in_office <span class="op">=</span> <span class="va">enddate</span> <span class="op">-</span> <span class="va">startdate</span><span class="op">)</span>,
  <span class="va">sum</span>
<span class="op">)</span>
<span class="co"># 365.25 is an approximation of course</span>
<span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="va">days_in_office</span> <span class="op">/</span> <span class="fl">365.25</span> <span class="op">&gt;</span> <span class="fl">12</span><span class="op">)</span>
<span class="va">leaders_12</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="va">female_leaders</span>, by <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span>
<span class="va">leaders_12</span> <span class="op">&lt;-</span> <span class="va">leaders_12</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">leaders_12</span><span class="op">$</span><span class="va">name</span>, <span class="va">leaders_12</span><span class="op">$</span><span class="va">enddate</span><span class="op">)</span>, <span class="op">]</span>
<span class="va">leaders_12</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">name</span>, <span class="va">leaders_12</span>, <span class="va">tail</span>, <span class="fl">1</span><span class="op">)</span>
<span class="co"># aggregate() returns dates as characters</span>
<span class="va">leaders_12</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/type.convert.html" class="external-link">type.convert</a></span><span class="op">(</span><span class="va">leaders_12</span>, as.is <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">leaders_12</span><span class="op">$</span><span class="va">familyName</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span>
  X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">leaders_12</span><span class="op">$</span><span class="va">name</span>, split <span class="op">=</span> <span class="st">" "</span><span class="op">)</span>,
  FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">name</span><span class="op">)</span> <span class="va">name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span><span class="op">]</span>,
  FUN.VALUE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>The inspiration to add <code><a href="../reference/geom_lexis.html">geom_lexis()</a></code> came again from <a href="https://github.com/gka" class="external-link">Gregor Aisch</a>. This time from his post on <a href="https://blog.datawrapper.de/longest-terms-european-leaders/" class="external-link">Three decades of European government leaders</a>. Let’s see how close we can get with our example data to the original plot.</p>
<details><p><summary><b>See full code</b></summary></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>
  <span class="va">female_leaders</span>,
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">startdate</span>,
    xend <span class="op">=</span> <span class="va">enddate</span>,
    group <span class="op">=</span> <span class="va">name</span>,
    color <span class="op">=</span> <span class="va">power</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_lexis.html">geom_lexis</a></span><span class="op">(</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span><span class="op">)</span>,
  point_size <span class="op">=</span> <span class="fl">1</span>
<span class="op">)</span>

<span class="co"># coord</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_equal</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># scales</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.02</span>, <span class="fl">.05</span><span class="op">)</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>
  limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">7400</span><span class="op">)</span>,
  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">8</span>, <span class="fl">12</span>, <span class="fl">16</span>, <span class="fl">20</span><span class="op">)</span> <span class="op">*</span> <span class="fl">365.25</span>,
  labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="va">i</span> <span class="op">/</span> <span class="fl">365.25</span><span class="op">)</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
  <span class="st">"executive"</span> <span class="op">=</span> <span class="st">"#311dfc"</span>,
  <span class="st">"non-executive"</span> <span class="op">=</span> <span class="st">"#f4ae1b"</span>
<span class="op">)</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html" class="external-link">scale_linetype_identity</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># title, subtitle, caption</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
  title <span class="op">=</span> <span class="st">"Elected Female Leaders"</span>,
  subtitle <span class="op">=</span> <span class="st">"Years in Office"</span>,
  caption <span class="op">=</span> <span class="st">"Highlighted are women that are in office for more than 12 years.\nSource: Wikipedia"</span>,
  x <span class="op">=</span> <span class="cn">NULL</span>,
  y <span class="op">=</span> <span class="cn">NULL</span>,
  color <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span>

<span class="co"># annotations</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html" class="external-link">geom_text_repel</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">leaders_12</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>
      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">enddate</span>, origin <span class="op">=</span> <span class="st">"1970-01-01"</span><span class="op">)</span>,
      y <span class="op">=</span> <span class="va">days_in_office</span>,
      colour <span class="op">=</span> <span class="va">power</span>,
      label <span class="op">=</span> <span class="va">familyName</span>
    <span class="op">)</span>,
    size <span class="op">=</span> <span class="fl">2</span>,
    direction <span class="op">=</span> <span class="st">"y"</span>,
    nudge_y <span class="op">=</span> <span class="fl">10</span>,
    inherit.aes <span class="op">=</span> <span class="cn">FALSE</span>,
    show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</details><p><img src="examples_files/figure-html/unnamed-chunk-3-1.png" width="95%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Markus Döring.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
